do $$
declare
  rec record;
  result_seed int;
begin
  for rec in (select id from player) loop
    for i in 1 .. 180 loop
      for j in 0 .. 2 loop
        result_seed := (random()*5)::int;
        insert into at_bat (player_id, gamedate, inning, result) values (rec.id, '20140401'::date + i, (3*(j+1))::int, case when result_seed=0 then 'H' else 'O' end);
      end loop;
    end loop;
  end loop;
end$$
language plpgsql;
